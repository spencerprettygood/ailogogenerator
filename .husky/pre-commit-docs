#!/bin/bash

# Check if any TypeScript files in lib/ were changed
if git diff --cached --name-only | grep -q "^lib/.*\.ts$"; then
  echo "ğŸ” Checking documentation for changed files..."
  
  # Generate temporary documentation to see if it would succeed
  npm run docs > /dev/null 2>&1 || {
    echo "âŒ Documentation generation failed. Please fix JSDoc comments in your code."
    echo "ğŸ’¡ Run 'npm run docs' to see the full error message."
    echo "ğŸ’¡ Ensure all public APIs are properly documented with JSDoc comments."
    exit 1
  }
  
  echo "âœ… Documentation generation successful."
fi

exit 0